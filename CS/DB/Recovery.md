## DataBase Recovery(데이터베이스 회복)이란?

* 트랜잭션들을 수행하는 도중 장애로 인해 손상된 데이터베이스를 손상되기 이전의 정상적인 상태로 복구시키는 작업 의미
<br>

## DataBase Recovery 종류

### 1. 데이터베이스 시스템 로그 기반 회복
* DB 회복 방법 중 하나로, DB 시스템에서 발생한 모든 변경 사항을 로그 파일에 저장
* 장애 발생 시점 이전까지의 모든 변경 사항 추적, 이전 상태로 DB 복구하는 작업 의미 

### 1-2. 데이터베이스 시스템 로그 기반 회복 종류
* Deferred Update(지연 갱신 회복 기법)
  <br>
  -> 트랜잭션이 부분 완료 상태에 이르기까지 발생한 모든 변경 내용을 로그 파일에만 저장
  <br>
  -> DB에는 Commit이 발생할 때까지 저장 지연하는 기법
  <br>
<br>


* Immediate Update(즉시 갱신 회복 기법)
  <br>
  -> 트랜잭션 수행 도중 데이터 변경 시, 변경 정보 로그 파일에 저장
  <br>
  -> 트랜잭션이 부분 완료되기 전이라도 모든 변경 내용 즉시 DB에 반영
  <br>
<br>


## Deferred Update(지연 갱신 회복 기법)

### 특징
* DB 회복 과정에서 UNDO 필요 없음
* 트랜잭션 복구 시 로그 파일 내용만 폐기 
* UNDO 필요 없기 떄문에 로그 레코드는 <트랜잭션 id, 데이터 아이템, 이후 값> 형식 

### 구현
* 트랜잭션 단위가 종료될 때까지 디스크에 기록하는 출력 연산 지연 시키고, DB 변경 내역을 로그에 보관 
* 트랜잭션 완료(Commit)시 로그 이용해 지연된 출력 연산(Redo) 수행
* 트랜잭션이 실패할 경우 Undo 없이 로그 단순 폐기


## Immediate Update(즉시 갱신 회복 기법)

### 특징
* 트랜잭션 완료 이전에 수행한 갱신 연산은 미완료 갱신(Uncommitted Update)라고 함
* 회복 시, 로그 파일을 참조하여 Redo와 Undo 연산 모두 실행
* 로그 레코드 <트랜잭션 id, 데이터 아이템, 이전 값, 이후 값> 형식 

### 구현
* 트랜잭션 활성 상태에서 데이터 변경 결과 로그와 DB에 반영
* 회복 시, 트랜잭션 실행 이전의 상태로 복구
* 로그 파일 참조, 미완료된 변경에 대해 Undo 우선 실행, 완료된 변경 Redo 실행 
  

> 2023.09.18 정리
